# =============================================
# SUBSCRIBERS WORKFLOW
# =============================================

###
# @name createSubscriberTransactional
# Create a new subscriber with technical details (Transactional Endpoint)
POST http://localhost:3001/api/transactions/create-subscriber-with-details
Content-Type: application/json
Authorization: Bearer {{adminLogin.response.body.token}}

{
  "subscriberData": {
    "firstName": "Test",
    "lastName": "Transactional",
    "mpesaNumber": "254711223344",
    "servicePlan": "68bb1824d72980a577d8b10f",
    "status": "pending-installation",
    "isTrial": false,
    "addressNotes": "Test address notes for transactional creation.",
    "internalNotes": "{\"type\":\"doc\",\"content\":[{\"type\":\"paragraph\",\"content\":[{\"type\":\"text\",\"text\":\"Test internal notes for transactional creation.\"}]}]}"
  },
  "technicalData": {
    "connectionType": "pppoe",
    "radiusUsername": "test.transactional.user",
    "radiusPassword": "transactionalpassword",
    "macAddress": null,
    "assignedIp": null
  },
  "unitId": null
}

###
# Create a new subscriber (Old endpoint - does not include technical details)
POST http://localhost:3001/api/subscribers
Content-Type: application/json
Authorization: Bearer {{adminLogin.response.body.token}}

{
  "firstName": "Jane",
  "lastName": "Doe",
  "accountNumber": "ACC-12345",
  "mpesaNumber": "254712345678",
  "contactPhone": "254712345678",
  "email": "jane.doe@example.com",
  "status": "active",
  "servicePlan": "68b18daff0d98528e24b4668",
  "billingCycle": "monthly",
  "nextDueDate": "2025-09-30",
  "accountBalance": 0,
  "addressNotes": "This is a test subscriber.",
  "connectionType": "ftth",
  "assignedIp": "192.168.1.100"
}

###
# Get all subscribers
GET http://localhost:3001/api/subscribers
Authorization: Bearer {{adminLogin.response.body.token}}

###
# Get a single subscriber
GET http://localhost:3001/api/subscribers/{{subscriberId}}
Authorization: Bearer {{adminLogin.response.body.token}}

###
# Update a subscriber
PATCH http://localhost:3001/api/subscribers/{{subscriberId}}
Content-Type: application/json
Authorization: Bearer {{adminLogin.response.body.token}}

{
  "status": "suspended"
}

###
# Delete a subscriber
DELETE http://localhost:3001/api/subscribers/{{subscriberId}}
Authorization: Bearer {{adminLogin.response.body.token}}